<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

        <!-- Add the coupon redeem form -->
        <template id="discount_code_payment" inherit_id="website_sale.payment" active="False" customize_show="True" name="Discount code">
            <xpath expr="//div[@id='right_column']" position="inside">
                <t t-call="website_sale_coupon.discount_code_form" />
            </xpath>
        </template>

        <!-- Add discount coupon lines -->
        <template id="payment_coupon_lines" inherit_id="website_sale.payment">

            <xpath expr="//table[@id='cart_products']/thead/tr/th[last()]" position="after">
                <th width="100">Coupons</th>
            </xpath>

            <xpath expr="//table[@id='cart_products']/tbody/tr/td[last()]" position="after">
                <td>
                    <t t-foreach="line.coupon_log_ids" t-as="discount">
                        <span t-att-data-coupon-id="discount.coupon_id.id" class="js_coupon" t-field="discount.coupon_id.name" /><br/>
                        (<span t-field="line.discount_amount" /> <span t-field="order.currency_id.name" />)<br/>
                    </t>
                </td>
            </xpath>

        </template>

	</data>
</openerp>
